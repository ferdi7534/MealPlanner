const DIET_OPTIONS = [
  { value: "standard", label: "Standard", icon: "ðŸ½ï¸", color: "#475569" },
  { value: "halal", label: "Halal", icon: "ðŸŒ™", color: "#059669" },
  { value: "kasher", label: "Kasher", icon: "â­", color: "#2563eb" },
  { value: "vegetarien", label: "VÃ©gÃ©tarien", icon: "ðŸ¥¬", color: "#16a34a" },
  { value: "vegan", label: "Vegan", icon: "âœ¨", color: "#7c3aed" },
  { value: "autre", label: "Autre", icon: "â“", color: "#d97706" },
];

let dietValue = "standard";
let customDietValue = "";

function renderDietSelector() {
  const container = document.getElementById("diet-selector");
  container.innerHTML = "";

  const grid = document.createElement("div");
  grid.className = "diet-grid";

  DIET_OPTIONS.forEach(opt => {
    const card = document.createElement("div");
    card.className = `diet-card ${dietValue === opt.value ? "selected" : ""}`;
    card.onclick = () => setDiet(opt.value);

    card.innerHTML = `
      <div class="diet-icon" style="background:${opt.color}">
        ${opt.icon}
      </div>
      <div class="diet-label">${opt.label}</div>
    `;

    grid.appendChild(card);
  });

  container.appendChild(grid);

  if (dietValue === "autre") {
    const textareaWrap = document.createElement("div");
    textareaWrap.className = "diet-textarea";
    textareaWrap.innerHTML = `
      <textarea
        placeholder="DÃ©crivez votre rÃ©gime alimentaire spÃ©cifique..."
      >${customDietValue}</textarea>
    `;

    textareaWrap.querySelector("textarea").oninput = e => {
      customDietValue = e.target.value;
    };

    container.appendChild(textareaWrap);
  }
}

function setDiet(value) {
  dietValue = value;
  if (value !== "autre") customDietValue = "";
  renderDietSelector();
}
renderDietSelector();
console.log(dietValue, customDietValue);
